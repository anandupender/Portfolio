<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="js/matter.js" type="text/javascript"></script>

  </head>
  <body>
    <canvas width="800" height="600" style="background:  0% 0% / contain rgb(15, 15, 19);" id="world"></canvas>
    <div id="logo-bank">
          <img src="images/arduino.png">
          <img src="images/arduino.png">
          <img src="images/arduino.png">
          <img src="images/arduino.png">
    </div>

    <script>
      loadLogoWorld();
      function loadLogoWorld() {

        var canvas = document.getElementById('world');

          //Get window variables
          var wWidth = window.innerWidth;
          var wHeight = window.innerHeight;

          //Set constants
          var LOGO_SCALE = 0.05
          var START_POS_X = 250
          var DROP_INTERVAL_X = 50
          if (wWidth < 1000) {
              LOGO_SCALE = 0.05
              START_POS_X = 80
              DROP_INTERVAL_X = 10
          }

        //Setup Matter JS

        var engine = Matter.Engine.create();
        	var world = engine.world;
        	var render = Matter.Render.create({
        		canvas: canvas,
        		engine: engine,
        		options: {
        			width: wWidth,
        			height: wHeight,
        			background: 'transparent',
        			wireframes: false,
        			showAngleIndicator: false,
                    density: 0.001,
                    friction: 0.1,
                    frictionAir: 0.01,
                    restitution: 0.9
        		}
        	})

          // ONE BY ONE
          var curLogoIndex = 0;
          var interval = setInterval(function() {
              if (curLogoIndex >= document.getElementById('logo-bank').children.length) {
                  clearInterval(interval)
                  return;
              }
              var logo = document.getElementById('logo-bank').children[curLogoIndex];
              console.log(logo);
              var startPosX = START_POS_X+curLogoIndex*DROP_INTERVAL_X
              if (startPosX > wWidth)
                  startPosX = wWidth - curLogoIndex*DROP_INTERVAL_X
              var startPosY = -100
              var matter = Matter.Bodies.rectangle(startPosX, startPosY, logo.width*LOGO_SCALE, logo.height*LOGO_SCALE, {
                  render: {
                      sprite: {
                          texture: logo.src,
                          xScale: LOGO_SCALE,
                          yScale: LOGO_SCALE,
                          visible: true
                      },
                      opacity: 1
                  }
              });
              Matter.World.add(world, matter);
              curLogoIndex++;
          }, 500)

        //Add a floor
        var floor = Matter.Bodies.rectangle(wWidth/2, wHeight, wWidth, 10, {
          isStatic: true,
              render: {
                  visible: false
              }
        });

          var leftWall = Matter.Bodies.rectangle(0, wHeight/2, 10, wHeight, {
          isStatic: true,
              render: {
                  visible: false
              }
        });
          var rightWall = Matter.Bodies.rectangle(wWidth, wHeight/2, 10, wHeight, {
              isStatic: true,
              render: {
                  visible: false
              }
          });
        Matter.World.add(world, [floor, leftWall, rightWall]);

        //Make interactive
        var mouseConstraint = Matter.MouseConstraint.create(engine, { //Create Constraint
          element: canvas,
          constraint: {
            render: {
                  visible: false
              },
              stiffness:0.8
            }
        });
        Matter.World.add(world, mouseConstraint);

        //Start the engine
        Matter.Engine.run(engine);
        Matter.Render.run(render);

      };
    </script>
  </body>
</html>
